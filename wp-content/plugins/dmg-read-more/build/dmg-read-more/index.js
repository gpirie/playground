(()=>{"use strict";var e,t={548:(e,t,r)=>{const o=window.wp.blocks,n=window.wp.element,a=window.wp.components,s=window.wp.blockEditor,i=window.wp.i18n,l=window.wp.apiFetch;var d=r.n(l);const p=window.ReactJSXRuntime,c=JSON.parse('{"UU":"gpirie/dmg-read-more"}');(0,o.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:t}){const r=(0,s.useBlockProps)({className:"dmg-read-more"}),{postId:o}=e,[l,c]=(0,n.useState)(""),[u,h]=(0,n.useState)([]),[m,w]=(0,n.useState)([]),[f,v]=(0,n.useState)(null),[b,g]=(0,n.useState)(!1);(0,n.useEffect)((()=>{g(!0),d()({path:"/wp/v2/posts?status=publish&per_page=20"}).then(h).catch((()=>h([]))).finally((()=>g(!1)))}),[]),(0,n.useEffect)((()=>{if(!l)return;const e=setTimeout((()=>{g(!0),(/^\d+$/.test(l)?d()({path:`/wp/v2/posts/${l}`}).then((e=>e&&e.id?[e]:[])).catch((()=>[])):d()({path:`/wp/v2/posts?search=${encodeURIComponent(l)}&status=publish&per_page=20`}).then((e=>e)).catch((()=>[]))).then((e=>w(e))).finally((()=>g(!1)))}),400);return()=>clearTimeout(e)}),[l]),(0,n.useEffect)((()=>{o&&d()({path:`/wp/v2/posts/${o}`}).then(v).catch((()=>v(null)))}),[o]);const _=(()=>{let e=l?m:u;return f&&!e.some((e=>e.id===f.id))&&(e=[f,...e]),e.map((e=>({value:e.id.toString(),label:`${e.title.rendered||`Post #${e.id}`} (ID: ${e.id})`})))})();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.InspectorControls,{children:(0,p.jsxs)(a.PanelBody,{title:"Search for Content",initialOpen:!0,children:[(0,p.jsx)(a.ComboboxControl,{label:(0,i.__)("Select a Post","readmore"),value:void 0!==o?o.toString():"",options:_,onChange:e=>{t({postId:parseInt(e,10)})},onFilterValueChange:c,disabled:b,help:(0,i.__)("Search for a post to add a link to. The line will be prepended with Read More: ","readmore")}),b&&(0,p.jsx)(a.Spinner,{})]})}),(0,p.jsx)("p",{...r,children:f?(0,p.jsxs)(p.Fragment,{children:["Read More:"," ",(0,p.jsx)("a",{className:"dmg-read-more__link",href:f.link,title:f.title.rendered,children:f.title.rendered})]}):(0,i.__)("No post selected.","readmore")})]})}})}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,r,n,a)=>{if(!r){var s=1/0;for(p=0;p<e.length;p++){for(var[r,n,a]=e[p],i=!0,l=0;l<r.length;l++)(!1&a||s>=a)&&Object.keys(o.O).every((e=>o.O[e](r[l])))?r.splice(l--,1):(i=!1,a<s&&(s=a));if(i){e.splice(p--,1);var d=n();void 0!==d&&(t=d)}}return t}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[r,n,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={269:0,305:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[s,i,l]=r,d=0;if(s.some((t=>0!==e[t]))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(l)var p=l(o)}for(t&&t(r);d<s.length;d++)a=s[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(p)},r=globalThis.webpackChunkdmg_read_more=globalThis.webpackChunkdmg_read_more||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=o.O(void 0,[305],(()=>o(548)));n=o.O(n)})();