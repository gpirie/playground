(()=>{"use strict";var e,t={612:(e,t,o)=>{const r=window.wp.blocks,n=window.wp.element,s=window.wp.components,a=window.wp.blockEditor,i=window.wp.i18n,l=window.wp.apiFetch;var d=o.n(l);const p=window.ReactJSXRuntime,c=JSON.parse('{"UU":"gpirie/dmg-read-more"}');(0,r.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:t}){const{postId:o}=e,[r,l]=(0,n.useState)(""),[c,u]=(0,n.useState)([]),[h,f]=(0,n.useState)([]),[v,w]=(0,n.useState)(null),[b,m]=(0,n.useState)(!1);(0,n.useEffect)((()=>{m(!0),d()({path:"/wp/v2/posts?status=publish&per_page=20"}).then((e=>u(e))).catch((()=>u([]))).finally((()=>m(!1)))}),[]),(0,n.useEffect)((()=>{if(!r)return;const e=setTimeout((()=>{m(!0),d()({path:`/wp/v2/posts?search=${encodeURIComponent(r)}&status=publish&per_page=20`}).then((e=>f(e))).catch((()=>f([]))).finally((()=>m(!1)))}),400);return()=>clearTimeout(e)}),[r]),(0,n.useEffect)((()=>{o&&d()({path:`/wp/v2/posts/${o}`}).then((e=>w(e))).catch((()=>w(null)))}),[o]);let g=r?h:c;v&&!g.find((e=>e.id===v.id))&&(g=[v,...g]);const O=g.map((e=>({value:e.id,label:e.title.rendered||`Post #${e.id}`}))),_=g.find((e=>e.id===o));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.InspectorControls,{children:(0,p.jsx)(s.PanelBody,{title:"Search for Content",initialOpen:!0,children:(0,p.jsx)(s.ComboboxControl,{label:(0,i.__)("Select a Post","readmore"),value:o,options:O,onChange:e=>t({postId:e}),onFilterValueChange:e=>l(e),disabled:b})})}),(0,p.jsx)("p",{...(0,a.useBlockProps)(),children:_?`Selected: ${_.title.rendered}`:(0,i.__)("No post selected.","readmore")})]})},save:function({attributes:e}){const{postId:t}=e;return console.log(e),(0,p.jsxs)("p",{...a.useBlockProps.save(),"data-post-id":t,children:["Read more: ",e.postId]})}})}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var s=o[e]={exports:{}};return t[e](s,s.exports,r),s.exports}r.m=t,e=[],r.O=(t,o,n,s)=>{if(!o){var a=1/0;for(p=0;p<e.length;p++){for(var[o,n,s]=e[p],i=!0,l=0;l<o.length;l++)(!1&s||a>=s)&&Object.keys(r.O).every((e=>r.O[e](o[l])))?o.splice(l--,1):(i=!1,s<a&&(a=s));if(i){e.splice(p--,1);var d=n();void 0!==d&&(t=d)}}return t}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[o,n,s]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={269:0,305:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var n,s,[a,i,l]=o,d=0;if(a.some((t=>0!==e[t]))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(l)var p=l(r)}for(t&&t(o);d<a.length;d++)s=a[d],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(p)},o=globalThis.webpackChunkdmg_read_more=globalThis.webpackChunkdmg_read_more||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=r.O(void 0,[305],(()=>r(612)));n=r.O(n)})();