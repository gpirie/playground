(()=>{"use strict";var e,t={548:(e,t,o)=>{const r=window.wp.blocks,n=window.wp.element,s=window.wp.components,i=window.wp.blockEditor,a=window.wp.i18n,l=window.wp.apiFetch;var p=o.n(l);const d=window.ReactJSXRuntime,c=JSON.parse('{"UU":"gpirie/dmg-read-more"}');(0,r.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:t}){const{postId:o}=e,[r,l]=(0,n.useState)(""),[c,u]=(0,n.useState)([]),[h,f]=(0,n.useState)([]),[v,w]=(0,n.useState)(null),[b,g]=(0,n.useState)(!1);(0,n.useEffect)((()=>{g(!0),p()({path:"/wp/v2/posts?status=publish&per_page=20"}).then((e=>u(e))).catch((()=>u([]))).finally((()=>g(!1)))}),[]),(0,n.useEffect)((()=>{if(!r)return;const e=setTimeout((()=>{g(!0),(/^\d+$/.test(r)?p()({path:`/wp/v2/posts/${r}`}).then((e=>e&&e.id?[e]:[])).catch((()=>[])):p()({path:`/wp/v2/posts?search=${encodeURIComponent(r)}&status=publish&per_page=20`}).catch((()=>[]))).then((e=>f(e))).finally((()=>g(!1)))}),400);return()=>clearTimeout(e)}),[r]),(0,n.useEffect)((()=>{o&&p()({path:`/wp/v2/posts/${o}`}).then((e=>w(e))).catch((()=>w(null)))}),[o]);let m=r?h:c;v&&!m.find((e=>e.id===v.id))&&(m=[v,...m]);const S=m.map((e=>({value:e.id.toString(),label:e.title.rendered||`Post #${e.id}`}))),O=m.find((e=>e.id===o));return console.log("options:",S),console.log("value:",String(o||"")),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.InspectorControls,{children:(0,d.jsxs)(s.PanelBody,{title:"Search for Content",initialOpen:!0,children:[(0,d.jsx)(s.ComboboxControl,{label:(0,a.__)("Select a Post","readmore"),value:void 0!==o?o.toString():"",options:S,onChange:e=>t({postId:parseInt(e,10)}),onFilterValueChange:e=>l(e),disabled:b}),b&&(0,d.jsx)(s.Spinner,{})]})}),(0,d.jsx)("p",{...(0,i.useBlockProps)(),children:O?`Selected: ${O.title.rendered}`:(0,a.__)("No post selected.","readmore")})]})}})}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var s=o[e]={exports:{}};return t[e](s,s.exports,r),s.exports}r.m=t,e=[],r.O=(t,o,n,s)=>{if(!o){var i=1/0;for(d=0;d<e.length;d++){for(var[o,n,s]=e[d],a=!0,l=0;l<o.length;l++)(!1&s||i>=s)&&Object.keys(r.O).every((e=>r.O[e](o[l])))?o.splice(l--,1):(a=!1,s<i&&(i=s));if(a){e.splice(d--,1);var p=n();void 0!==p&&(t=p)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[o,n,s]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={269:0,305:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var n,s,[i,a,l]=o,p=0;if(i.some((t=>0!==e[t]))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(l)var d=l(r)}for(t&&t(o);p<i.length;p++)s=i[p],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(d)},o=globalThis.webpackChunkdmg_read_more=globalThis.webpackChunkdmg_read_more||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=r.O(void 0,[305],(()=>r(548)));n=r.O(n)})();